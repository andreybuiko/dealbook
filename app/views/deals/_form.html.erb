<%= simple_form_for @deal do |f| %>
  <%= f.input :close_date, :label => 'Close date', :required => false %>
  <%= f.association :company, :input_html => {:class => "chzn-select", 
    "data-placeholder" => "Select a company"} %>   
  <%= f.input :category, :collection => Deal::CATEGORIES, :selected => :first %> 
  <%= f.input :round, :collection => Deal::ROUNDS, :selected => :first %>   

  <!-- TODO: How to deal with polymorphic? -->
  <!--  f.association :investors, :input_html => {multiple: true, :class => "chzn-select", 
    "data-placeholder" => "Select one or more investors"} %> -->

  <%= f.simple_fields_for :offerings do |offerings_form| %>
    <%= offerings_form.label :offering, 'Investors' %>
    <% buyer_collection = Investor.all.map {|x| [x.name, "Investor:#{x.id}"]} + Company.all.map {|x| [x.name, "Company:#{x.id}"]} %> 
    <%= offerings_form.select :buyer, buyer_collection, {}, {multiple: true} %>
  <% end %>  

  <%= f.input :currency, :collection => Deal::CURRENCIES, :selected => :first %>       
  <%= f.input :amount, :label => 'Total Amount' %>  
  <%= f.input :pre_valuation, :label => 'Pre-money Valuation' %>
  <%= f.input :source_url, :label => 'Source' %>  
  <br>   
  <%= f.button :submit %>  
<% end %>
